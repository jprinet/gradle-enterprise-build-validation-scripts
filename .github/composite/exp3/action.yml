name: Run experiment 3
description: 'Run Gradle Experiment 3'

inputs:
  repositoryUrl:
    description: Project repository URL
    required: true
  branch:
    description: Git Branch
    required: true
  task:
    description: Gradle task
    required: true
  gradleEnterpriseUrl:
    description: Gradle Enterprise URL
    required: true
  shell:
    description: Caller shell (default bash)
    required: false
    default: 'bash'

runs:
  using: "composite"
  steps:
    - name: Run Gradle Experiment 3
      run: |
        cd gradle-enterprise-gradle-build-validation
        ./03-validate-local-build-caching-different-locations.sh -r ${{ inputs.repositoryUrl }} -b ${{ inputs.branch }} -t ${{ inputs.task }} -s ${{ inputs.gradleEnterpriseUrl }}
      shell: ${{ inputs.shell }}
